## 分库分表

1. 简介

   - 水平: 分散原有数据到更多的库表中
   - 垂直: 垂直即按照业务对库, 按字段对表切分

2. 分类

   - 如果磁盘或网络有 IO 瓶颈, 那就要分库和垂直分表
   - 如果是 CPU 瓶颈, 即查询效率偏低, **水平分表**

3. 带来的问题
   - 唯一 ID: DB 自增, Snowflake, 号段{guid/leaf-uid}
   - 非 partition key 查询: 映射法{映射表用到覆盖索引}
   - 扩容: 分片(hash 一致性算法及优化) + 数据迁移
   - 事务一致性
   - 跨库 join
